<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Mocha Tests</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/mocha/mocha.css" />
</head>
<body>
  <!-- Mocha setup -->
  <div id="mocha"></div>
  <script src="https://unpkg.com/chai/chai.js"></script>
  <script src="https://unpkg.com/mocha/mocha.js"></script>
  <script class="mocha-init">
    mocha.setup('bdd');
    mocha.checkLeaks();
  </script>
  <!-- Main code -->
  <script>
    // write your code here
    class connectFour{
      constructor(){
        this.board = [
            [0,0,0],
            [0,0,0],
            [0,0,0]
          ]
        this.playerOne = {
          colour : "Red",
          win : false,
          numOfMoves : 0
        }

        this.playerTwo = {
          colour : "Yellow",
          win : false,
          numOfMoves : 0
        }

        this.endGame = false

      }

      showBoard(){
        return this.board
      }
      showPlayerColours(){
        return `Player one: ${this.playerOne.colour} | Player two: ${this.playerTwo.colour}`
      }

      getPlayerMove(playerMove){
        return parseInt(playerMove)
      }

      isValidMove(playerMove){
        // checks that player input is bigger than 0 and smaller or equal to number of columnss
        return (playerMove <= this.board[0].length) && (playerMove > 0) ?
          true : false
      }

      getPlayerMove(playerMove){
        let validMove = false
        while (!validMove){
          if(isValidMove(playerMove)){
            validMove = true
          }
          else{
            console.log(`You can't go there! Please enter a number from 1 to ${this.board[0].length}`)
          }
        }
        this.makeAMove()
        return parseInt(playerMove)
      }

      isValidMove(playerMove){
        // checks that player input is bigger than 0 and smaller or equal to number of columnss
        if((playerMove > 0) && (playerMove <= this.board[0].length)){

        }
      }

      makeAMove(playerMove){
        //adds player move to board in next available row
        let spaceFound = false
        let row = 0
        while(!spaceFound){
          (this.board[row] == 0) ?
            spaceFound = true : row++
        }

        //checks which player's go it is
        if(this.playerOne.isCurrentPlayer == true){
          this.board[playerMove][row] = "R"
        } else{this.board[playerMove][row] = "Y" }

        return this.board
      }
    }
  </script>
  <!-- tests -->
  <script>
    const expect = chai.expect
  </script>
  <script>
    // write your tests here
    let newGame
    let templBoard
    beforeEach(() => {
          newGame = new connectFour()
        })
    describe("Setup", () => {
      describe("connectFour", () =>{
        it("shows a new board, with no moves", () => {
          //currently set up as a 3x3 board to make logic simpler
          templBoard = [
            [0,0,0],
            [0,0,0],
            [0,0,0]
          ]
          expect(newGame.showBoard()).to.deep.equal(templBoard)
        })

        it("defines player 1 and 2", () => {
          expect(newGame.showPlayerColours()).to.equal("Player one: Red | Player two: Yellow")
        })
      })
    })

    describe("playerInput", () => {

      let playerGoes
      describe("getAPlayerInput", () =>{
        it("allows user to enter input for a column", () => {
          playerGoes = 1
          expect(newGame.getPlayerMove(playerGoes)).to.deep.equal(1)
        })

        describe("checks if player can go in this space", () => {
          it("has a valid player input", () => {
            expect(newGame.isValidMove(playerGoes)).to.equal(true)
          })
          it("has an invalid player input", () => {
            playerGoes = 0
            expect(newGame.isValidMove(playerGoes)).to.equal(false)
          })
        })

        it("displays the player's counter in the 2D array", () => {
          expect
        })

      })

    })

  </script>
  <script class="mocha-exec">
    mocha.run();
  </script>
</body>
</html>